---
{"dg-publish":true,"date":"2024-01-12","time":"20:11","progress":"进行中","tags":null,"permalink":"/分布式系统/名词解释/","dgPassFrontmatter":true}
---


# 名词解释


## 声明

本文为本人原创，未经授权严禁转载。如需转载需要在文章最前面注明本文原始链接。



# 脑裂
在分布式系统中，脑裂（Brain Split）是指一种特定的异常状况，当一个分布式系统由于网络分区或部分节点失效而导致集群分裂为两个或多个独立运行的子集时，我们称之为发生了脑裂现象。在这样的情况下，每个子集群都可能认为自己是整个系统的唯一有效部分，并继续处理请求和更新数据，这将导致数据不一致性和潜在的错误操作。

脑裂问题的核心挑战在于如何保证分布式系统在面临网络分区等异常情况下的数据一致性以及服务的高可用性。为解决这个问题，分布式系统通常会采用一些策略，如设置法定人数（Quorum）、使用分布式一致性算法（如Paxos、Raft）、实现自动故障恢复机制等，以确保在任何情况下都能做出正确的决策并保持数据的一致性。

# 拜占庭问题
拜占庭问题（Byzantine Failure）源于计算机科学和分布式计算领域，最初由莱斯利·兰伯特（Leslie Lamport）等人在1982年提出。它描述的是在一个分布式系统中，多个节点通过网络进行通信并达成共识时可能遇到的故障模型。具体来说，在一个存在拜占庭故障的系统中，部分节点可能会表现出不可预知的行为，包括但不限于：

1. 发送错误或误导性的信息；
2. 拒绝响应请求；
3. 故意发送冲突的信息给不同的参与者。

拜占庭问题的核心挑战在于：即使在存在恶意或者故障节点的情况下，如何设计一种算法使得分布式系统的其余节点依然能够达成一致，保证系统的正确性和可靠性。

解决拜占庭问题的一个著名应用实例就是区块链技术中的拜占庭将军问题以及对应的拜占庭容错（Byzantine Fault Tolerance, BFT）算法，如PBFT（Practical Byzantine Fault Tolerance）等。

为了解决拜占庭将军问题，Miguel Castro和Barbara Liskov于1999年提出了实用拜占庭容错算法（Practical Byzantine Fault Tolerance，PBFT）。PBFT是一种状态机复制算法，它允许在部分节点失效（包括拜占庭行为）的情况下，系统仍然能够正常运行并保持一致性。以下是PBFT算法的基本流程：
1. 客户端发起请求：客户端向主节点（也称为领导者节点）发送一个请求消息。
2. 领导者节点广播预准备消息：主节点接收到客户端请求后，对请求进行编号并生成一个预准备消息，然后将该消息广播给所有备份节点（即其他副本节点）。
3. 备份节点回复准备消息：每个备份节点接收到预准备消息后，验证其合法性（如检查消息是否来自当前视图的主节点，消息序号是否连续等）。如果验证通过，备份节点会向其他所有节点（包括自己）发送准备消息。
4. 领导者节点广播提交消息：当主节点收到超过2f个相同的准备消息（f为系统能容忍的最大拜占庭节点数）后，它将生成一个提交消息并广播给所有备份节点。这里假设系统总共有3f+1个节点。
5. 备份节点执行并回复确认消息：备份节点接收到提交消息并验证通过后，执行相应的操作，并向客户端发送确认消息。同时，备份节点也会更新自己的状态以保持与主节点的一致性。
6. 客户端等待足够多的确认消息：客户端需要收集到大于f+1个相同的确认消息，这样即使有f个拜占庭节点作恶，也能确保至少有一个正确的执行结果。
7. 状态同步与视图更换：若主节点出现故障或通信异常，系统可通过视图更换协议切换至新的主节点，并通过状态同步机制确保所有副本节点的一致性。通过以上步骤，PBFT算法能够在部分节点失效的情况下，保证分布式系统中所有诚实节点就客户端请求达成一致，并正确地执行请求操作，从而解决了拜占庭将军问题。

# 复制状态机

复制状态机（Replicated State Machines, RSM）是一种分布式系统中的概念，它通过在网络中多台节点上运行相同的状态机，并按照相同的顺序处理相同的输入来达成共识。**在每个节点上，状态机从一个初始状态开始，当接收到相同的命令序列时，所有节点的状态机都会执行相同的操作并过渡到相同的新状态**。

在分布式系统中，复制状态机主要用于构建高可用、容错的服务，如分布式数据库、区块链系统等。当部分节点出现故障时，其他节点可以继续提供服务，保证系统的整体一致性。

其基本原理包括：

1. 所有节点共享同一个确定性的状态机模型。
2. 输入命令（事务或日志条目）需要先通过一个共识协议（如 Paxos、Raft 等）在所有节点间达成一致，决定这些命令的全局顺序。
3. 每个节点按照这个全局顺序独立地在其本地状态机上执行命令，从而确保所有节点的状态最终一致。

这种机制使得即使在部分节点失效的情况下，整个系统仍然能够保持正确性和活性，实现数据的可靠存储和处理。